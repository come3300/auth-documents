---
title: ç¬¬ï¼–å›ï¼šã‚ˆãã‚ã‚‹é–“é•ã„ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ âš ï¸
category: Next.js
---

## ç¬¬6ç« ï¼šã‚ˆãã‚ã‚‹é–“é•ã„ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ âš ï¸

### ğŸš« ã‚ˆãã‚ã‚‹åˆå¿ƒè€…ã®é–“é•ã„

#### 1. **Server Componentsã§React Hooksã‚’ä½¿ç”¨**
```javascript
// âŒ é–“é•ã„ - Server Componentã§useStateã‚’ä½¿ç”¨
export default function ServerComponent() {
  const [count, setCount] = useState(0); // ã‚¨ãƒ©ãƒ¼ï¼
  
  return <div>{count}</div>;
}

// âœ… æ­£è§£ - Client Componentã§use clientæŒ‡å®š
'use client';

import { useState } from 'react';

export default function ClientComponent() {
  const [count, setCount] = useState(0);
  
  return (
    <div>
      <p>ã‚«ã‚¦ãƒ³ãƒˆ: {count}</p>
      <button onClick={() => setCount(count + 1)}>+1</button>
    </div>
  );
}
```

#### 2. **æ°´å’Œã‚¨ãƒ©ãƒ¼ï¼ˆHydration Errorï¼‰**
```javascript
// âŒ é–“é•ã„ - ã‚µãƒ¼ãƒãƒ¼ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ç•°ãªã‚‹å€¤
export default function TimeComponent() {
  const now = new Date().toLocaleString(); // å®Ÿè¡Œã®ãŸã³ã«å¤‰ã‚ã‚‹
  return <div>ç¾åœ¨æ™‚åˆ»: {now}</div>;
}

// âœ… æ­£è§£ - useEffectã§ä¸€è²«æ€§ã‚’ä¿ã¤
'use client';

import { useState, useEffect } from 'react';

export default function TimeComponent() {
  const [currentTime, setCurrentTime] = useState('');
  
  useEffect(() => {
    setCurrentTime(new Date().toLocaleString());
    
    const timer = setInterval(() => {
      setCurrentTime(new Date().toLocaleString());
    }, 1000);
    
    return () => clearInterval(timer);
  }, []);
  
  return (
    <div>
      ç¾åœ¨æ™‚åˆ»: {currentTime || 'èª­ã¿è¾¼ã¿ä¸­...'}
    </div>
  );
}
```

#### 3. **ç’°å¢ƒå¤‰æ•°ã®èª¤ç”¨**
```javascript
// âŒ é–“é•ã„ - æ©Ÿå¯†æƒ…å ±ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«éœ²å‡º
'use client';

export default function BadExample() {
  const apiKey = process.env.SECRET_API_KEY; // undefined ã«ãªã‚‹ï¼
  return <div>{apiKey}</div>;
}

// âœ… æ­£è§£ - Server Componentã§ä½¿ç”¨
export default async function GoodExample() {
  const apiKey = process.env.SECRET_API_KEY; // ã‚µãƒ¼ãƒãƒ¼ã§ã®ã¿ä½¿ç”¨
  const data = await fetch(`https://api.example.com/data?key=${apiKey}`)
    .then(res => res.json());
  
  return <div>{data.message}</div>;
}

// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ä½¿ã„ãŸã„å ´åˆã¯NEXT_PUBLIC_ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
'use client';

export default function PublicExample() {
  const publicUrl = process.env.NEXT_PUBLIC_API_URL; // ã“ã‚Œã¯ä½¿ãˆã‚‹
  return <div>{publicUrl}</div>;
}
```

### âœ… ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### 1. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é©åˆ‡ãªåˆ†å‰²**
```javascript
// âœ… è‰¯ã„ä¾‹ï¼šè²¬ä»»ã‚’æ˜ç¢ºã«åˆ†å‰²
// Server Component - ãƒ‡ãƒ¼ã‚¿å–å¾—
export default async function ProductsPage() {
  const products = await getProducts();
  
  return (
    <div>
      <h1>å•†å“ä¸€è¦§</h1>
      {products.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  );
}

// Client Component - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
'use client';

export default function ProductCard({ product }) {
  const [isFavorite, setIsFavorite] = useState(false);
  
  return (
    <div className="product-card">
      <h2>{product.name}</h2>
      <p>Â¥{product.price}</p>
      <button onClick={() => setIsFavorite(!isFavorite)}>
        {isFavorite ? 'â¤ï¸' : 'ğŸ¤'}
      </button>
    </div>
  );
}
```

#### 2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å®Ÿè£…**
```javascript
// error.tsx - ã‚¨ãƒ©ãƒ¼å¢ƒç•Œ
'use client';

export default function Error({ 
  error, 
  reset 
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  useEffect(() => {
    // ã‚¨ãƒ©ãƒ¼ã‚’ãƒ­ã‚°ã«è¨˜éŒ²
    console.error('Application error:', error);
  }, [error]);
  
  return (
    <div className="error-boundary">
      <h2>å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>
      <details>
        <summary>ã‚¨ãƒ©ãƒ¼ã®è©³ç´°</summary>
        <pre>{error.message}</pre>
      </details>
      <button onClick={reset}>
        ã‚‚ã†ä¸€åº¦è©¦ã™
      </button>
    </div>
  );
}

// loading.tsx - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
export default function Loading() {
  return (
    <div className="loading-skeleton">
      <div className="animate-pulse space-y-4">
        <div className="h-8 bg-gray-200 rounded"></div>
        <div className="h-4 bg-gray-200 rounded w-3/4"></div>
        <div className="h-4 bg-gray-200 rounded w-1/2"></div>
      </div>
    </div>
  );
}
```

#### 3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
```javascript
// ç”»åƒæœ€é©åŒ–
import Image from 'next/image';

export default function OptimizedImages() {
  return (
    <div>
      {/* âœ… Next.js Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ */}
      <Image
        src="/hero-image.jpg"
        alt="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ"
        width={800}
        height={400}
        priority // é‡è¦ãªç”»åƒã¯å„ªå…ˆèª­ã¿è¾¼ã¿
        placeholder="blur" // ã¼ã‹ã—ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
      />
      
      {/* âŒ é€šå¸¸ã®imgè¦ç´ ã¯é¿ã‘ã‚‹ */}
      {/* <img src="/hero-image.jpg" alt="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" /> */}
    </div>
  );
}

// å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆã‚³ãƒ¼ãƒ‰åˆ†å‰²ï¼‰
import { lazy, Suspense } from 'react';

const HeavyComponent = lazy(() => import('./HeavyComponent'));

export default function OptimizedLoading() {
  return (
    <div>
      <h1>ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h1>
      
      <Suspense fallback={<div>é‡ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’èª­ã¿è¾¼ã¿ä¸­...</div>}>
        <HeavyComponent />
      </Suspense>
    </div>
  );
}
```

---

## ã¾ã¨ã‚ ğŸ¯

**Next.jsã®å­¦ç¿’ã§æœ€ã‚‚é‡è¦ãªãƒã‚¤ãƒ³ãƒˆï¼š**

### ğŸ“š **è¦šãˆã¦ãŠãã¹ãæ ¸å¿ƒæ¦‚å¿µ**

1. **App Routerã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**
   - ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€  = URLæ§‹é€ 
   - ç‰¹åˆ¥ãªãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆpage.tsxã€layout.tsxã€loading.tsxã€error.tsxï¼‰

2. **Server Components vs Client Components**
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Server Components
   - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªæ™‚ã ã‘`'use client'`

3. **4ã¤ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹å¼**
   - **SSG**: é™çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆãƒ–ãƒ­ã‚°ã€ä¼æ¥­ã‚µã‚¤ãƒˆï¼‰
   - **ISR**: å®šæœŸæ›´æ–°ãŒå¿…è¦ï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹ã€å•†å“ãƒšãƒ¼ã‚¸ï¼‰
   - **SSR**: ãƒ¦ãƒ¼ã‚¶ãƒ¼å›ºæœ‰ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
   - **CSR**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆãƒãƒ£ãƒƒãƒˆã€ç®¡ç†ç”»é¢ï¼‰

### ğŸš€ **æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**

1. **å®Ÿéš›ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦ã¿ã‚‹**
2. **TypeScript ã‚’å°å…¥ã™ã‚‹**
3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆPrisma + PostgreSQLï¼‰ã‚’ç¹‹ã’ã‚‹**
4. **èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆNextAuth.jsï¼‰ã‚’è¿½åŠ ã™ã‚‹**
5. **Vercel ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦å…¬é–‹ã™ã‚‹**

### ğŸ“– **å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹**

- [Next.js å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
- [App Router å®Œå…¨ã‚¬ã‚¤ãƒ‰](https://nextjs.org/docs/app)
- [Next.js Learn ã‚³ãƒ¼ã‚¹](https://nextjs.org/learn)

**Next.jsã¯ç¶™ç¶šçš„ãªå­¦ç¿’ãŒå¿…è¦ãªæŠ€è¡“ã§ã™ã€‚ã“ã®åŸºç¤ã‚’ã—ã£ã‹ã‚Šèº«ã«ã¤ã‘ã¦ã€å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ãªãŒã‚‰å­¦ç¿’ã‚’ç¶šã‘ã¦ã„ãã¾ã—ã‚‡ã†ï¼** ğŸ‰